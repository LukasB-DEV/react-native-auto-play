///
/// JNitroNavigationAlert.hpp
/// This file was generated by nitrogen. DO NOT MODIFY THIS FILE.
/// https://github.com/mrousavy/nitro
/// Copyright Â© 2025 Marc Rousavy @ Margelo
///

#pragma once

#include <fbjni/fbjni.h>
#include "NitroNavigationAlert.hpp"

#include "AlertActionStyle.hpp"
#include "AlertDismissalReason.hpp"
#include "AutoText.hpp"
#include "Distance.hpp"
#include "DistanceUnits.hpp"
#include "JAlertActionStyle.hpp"
#include "JAlertDismissalReason.hpp"
#include "JAutoText.hpp"
#include "JDistance.hpp"
#include "JDistanceUnits.hpp"
#include "JFunc_void.hpp"
#include "JFunc_void_AlertDismissalReason.hpp"
#include "JNavigationAlertAction.hpp"
#include "JNitroImage.hpp"
#include "NavigationAlertAction.hpp"
#include "NitroImage.hpp"
#include <functional>
#include <optional>
#include <string>

namespace margelo::nitro::at::g4rb4g3::autoplay::hybrid {

  using namespace facebook;

  /**
   * The C++ JNI bridge between the C++ struct "NitroNavigationAlert" and the the Kotlin data class "NitroNavigationAlert".
   */
  struct JNitroNavigationAlert final: public jni::JavaClass<JNitroNavigationAlert> {
  public:
    static auto constexpr kJavaDescriptor = "Lcom/margelo/nitro/at/g4rb4g3/autoplay/hybrid/NitroNavigationAlert;";

  public:
    /**
     * Convert this Java/Kotlin-based struct to the C++ struct NitroNavigationAlert by copying all values to C++.
     */
    [[maybe_unused]]
    [[nodiscard]]
    NitroNavigationAlert toCpp() const {
      static const auto clazz = javaClassStatic();
      static const auto fieldId = clazz->getField<double>("id");
      double id = this->getFieldValue(fieldId);
      static const auto fieldTitle = clazz->getField<JAutoText>("title");
      jni::local_ref<JAutoText> title = this->getFieldValue(fieldTitle);
      static const auto fieldSubtitle = clazz->getField<JAutoText>("subtitle");
      jni::local_ref<JAutoText> subtitle = this->getFieldValue(fieldSubtitle);
      static const auto fieldImage = clazz->getField<JNitroImage>("image");
      jni::local_ref<JNitroImage> image = this->getFieldValue(fieldImage);
      static const auto fieldPrimaryAction = clazz->getField<JNavigationAlertAction>("primaryAction");
      jni::local_ref<JNavigationAlertAction> primaryAction = this->getFieldValue(fieldPrimaryAction);
      static const auto fieldSecondaryAction = clazz->getField<JNavigationAlertAction>("secondaryAction");
      jni::local_ref<JNavigationAlertAction> secondaryAction = this->getFieldValue(fieldSecondaryAction);
      static const auto fieldDurationMs = clazz->getField<double>("durationMs");
      double durationMs = this->getFieldValue(fieldDurationMs);
      static const auto fieldOnWillShow = clazz->getField<JFunc_void::javaobject>("onWillShow");
      jni::local_ref<JFunc_void::javaobject> onWillShow = this->getFieldValue(fieldOnWillShow);
      static const auto fieldOnDidDismiss = clazz->getField<JFunc_void_AlertDismissalReason::javaobject>("onDidDismiss");
      jni::local_ref<JFunc_void_AlertDismissalReason::javaobject> onDidDismiss = this->getFieldValue(fieldOnDidDismiss);
      return NitroNavigationAlert(
        id,
        title->toCpp(),
        subtitle != nullptr ? std::make_optional(subtitle->toCpp()) : std::nullopt,
        image != nullptr ? std::make_optional(image->toCpp()) : std::nullopt,
        primaryAction->toCpp(),
        secondaryAction != nullptr ? std::make_optional(secondaryAction->toCpp()) : std::nullopt,
        durationMs,
        onWillShow != nullptr ? std::make_optional([&]() -> std::function<void()> {
          if (onWillShow->isInstanceOf(JFunc_void_cxx::javaClassStatic())) [[likely]] {
            auto downcast = jni::static_ref_cast<JFunc_void_cxx::javaobject>(onWillShow);
            return downcast->cthis()->getFunction();
          } else {
            auto onWillShowRef = jni::make_global(onWillShow);
            return [onWillShowRef]() -> void {
              return onWillShowRef->invoke();
            };
          }
        }()) : std::nullopt,
        onDidDismiss != nullptr ? std::make_optional([&]() -> std::function<void(AlertDismissalReason /* reason */)> {
          if (onDidDismiss->isInstanceOf(JFunc_void_AlertDismissalReason_cxx::javaClassStatic())) [[likely]] {
            auto downcast = jni::static_ref_cast<JFunc_void_AlertDismissalReason_cxx::javaobject>(onDidDismiss);
            return downcast->cthis()->getFunction();
          } else {
            auto onDidDismissRef = jni::make_global(onDidDismiss);
            return [onDidDismissRef](AlertDismissalReason reason) -> void {
              return onDidDismissRef->invoke(reason);
            };
          }
        }()) : std::nullopt
      );
    }

  public:
    /**
     * Create a Java/Kotlin-based struct by copying all values from the given C++ struct to Java.
     */
    [[maybe_unused]]
    static jni::local_ref<JNitroNavigationAlert::javaobject> fromCpp(const NitroNavigationAlert& value) {
      return newInstance(
        value.id,
        JAutoText::fromCpp(value.title),
        value.subtitle.has_value() ? JAutoText::fromCpp(value.subtitle.value()) : nullptr,
        value.image.has_value() ? JNitroImage::fromCpp(value.image.value()) : nullptr,
        JNavigationAlertAction::fromCpp(value.primaryAction),
        value.secondaryAction.has_value() ? JNavigationAlertAction::fromCpp(value.secondaryAction.value()) : nullptr,
        value.durationMs,
        value.onWillShow.has_value() ? JFunc_void_cxx::fromCpp(value.onWillShow.value()) : nullptr,
        value.onDidDismiss.has_value() ? JFunc_void_AlertDismissalReason_cxx::fromCpp(value.onDidDismiss.value()) : nullptr
      );
    }
  };

} // namespace margelo::nitro::at::g4rb4g3::autoplay::hybrid
